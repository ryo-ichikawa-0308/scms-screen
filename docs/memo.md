# 画面設計メモ

## 前提

- 基本的なコンポーネントはAngular Materialを用いる。

## 画面

### メイン画面

- ヘッダ、描画領域、フッタに3分割された画面。全体の統括をする。ログイン状態を持つ。

### ハンバーガーメニュー

- ヘッダの左端に表示する。ログイン中はサービス一覧・契約一覧・ログアウトを表示する。ログアウト中は「ログインしてください」という固定文字列を表示する。

### ログイン画面

- メールアドレス、パスワードを入力し、ログインボタンを押下することで認証サービスのログインメソッドを実行する。
- 認証エラーを表示するラベルを持つ。ログイン成功した場合、サービス一覧画面に遷移する。

### サービス一覧画面

- システム上で提供されているユーザー提供サービスの一覧画面。
- 画面ロード時に、サービス一覧検索APIを検索キー無しで実行し、結果をグリッド領域に描画する。
- サービス名を入力するテキストボックスと、その入力をキーに検索実行する検索ボタン、グリッド描画領域を持つ。
- グリッド描画領域は、レスポンスのページ情報(総ページ数、現在ページ、オフセット、リミット)をもとにページングを行う。
- グリッドクリックで、表示されているレコードのIDをキーにサービス詳細画面をポップアップする。

### サービス詳細画面

- 親コンポーネント(サービス一覧画面・レコードクリック)で受け取ったIDをもとにサービス詳細検索APIを実行し、結果を表示する。
- 注文数を入力するスピンボックス(最小値1、最大値は受け取ったレコード.在庫数)と、契約APIを実行するボタン、ポップアップを閉じるボタンを持つ。
- 契約ボタンを押下すると、表示しているサービスIDと在庫をキーに契約APIを実行する。契約API実行中は契約ボタンを不活化する。APIの戻りと同時に活性化する。
- APIの返り(契約成功・失敗)を表示するラベルを持つ。

### 契約一覧画面

- ログイン中のユーザーが契約している契約の一覧画面。
- 画面ロード時に、契約一覧検索APIを検索キー無しで実行し、結果をグリッド領域に描画する。
- サービス名を入力するテキストボックスと、その入力をキーに検索実行する検索ボタン、グリッド描画領域を持つ。
- グリッド描画領域は、レスポンスのページ情報(総ページ数、現在ページ、オフセット、リミット)をもとにページングを行う。
- グリッドクリックで、表示されているレコードのIDをキーに契約詳細画面をポップアップする。

### 契約詳細画面

- 親コンポーネント(サービス一覧画面・レコードクリック)で受け取ったIDをもとに契約詳細検索APIを実行し、結果を表示する。
- 解約APIを実行するボタン、ポップアップを閉じるボタンを持つ。
- 契約ボタンを押下すると、表示しているサービスIDキーに解約APIを実行する。解約API実行中は解約ボタンを不活化する。APIが成功した場合は不活化のまま、APIが失敗した場合は再度活性化する。
- APIの返り(契約成功・失敗)を表示するラベルを持つ。

## 画面バックエンド

画面からのリクエストを受け付け、バックエンドAPIにリクエストを送信する。APIからの戻り値を画面用に詰め直し、画面に渡す。実質的にBFFとして動作する。

### 認証

- ログインAPI
- トークンリフレッシュAPI
- ログアウトAPI

### ユーザー提供サービス

- ユーザー提供サービス一覧API
- ユーザー提供サービス詳細API

### 契約

- 契約一覧API
- 契約詳細API
- 契約API
- 解約API
